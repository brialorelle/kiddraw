
<!-- ## Code -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CHILD DEVELOPMENT SURVEY</title>
  <script src="jquery-1.11.2.min.js"></script>
  <script src="mmturkey-0.6.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="uptake_style.css" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="commonlyDrawnRatings2.js"></script>

<style>
body {
  padding: 0;
  margin: 0;
  font-family: Palatino Linotype, Bookman Antiqua, Palatino, serif;
  font-size: 14px;
  line-height: 20px;
}

.slide {
  width: 95%;
  height: 50%;
  display: none;
  position: absolute;
  margin: 0;
  margin-left: 0.5%;
  padding: 1% 2% 1% 2%;
}
.center {
  margin-left: auto;
  margin-right: auto;
  width: 70%;
  text-align: center;
}
input, select, button {
  font-family: Georgia, serif;
  font-size: 14px;
}
input[type="radio"] {
  margin: 15px 15px;
}
button {
  background: url(images/button-gradient.png);
  border: 1px solid #999;
  border-top: 1px solid #e0e0e0;
  border-left: 1px solid #e0e0e0;
  margin: 10px;
  padding-left: 5px;
  padding-right: 5px;
  height: 29px;
  min-width: 70px;
}
button:active {
  border-left: 1px solid #c9c9c9;
  border-top: 1px solid #c9c9c9;
  background: none;
  background-color: #c9c9c9;
}
button[disabled] {
  background: url(zen-button.png);
  border: 1px solid #999;
  border-top: 1px solid #e0e0e0;
  border-left: 1px solid #e0e0e0;
  cursor: not-allowed;
}

/* ## Experiment-specific styles */


/* This stuff will vary by experiment. */

#logo-text {
  font-weight: bold;
}
#instructions {
  text-align: center;
}
#mult-choice {
  width:20%;
  text-align: right;
  margin: 0 auto;
  margin-bottom: 1em;
}

#mult-answer {
  width: 500px;
  text-align: left;
  margin: 0 auto;
  margin-bottom: 1em;
}

#image {
 width: 200px;
  margin: 0 auto;
  margin-bottom: 1em;
}

.block-text {
  width: 500px;
  text-align: justify;
  margin: 0 auto;
  margin-bottom: 1em;
}
.likert {
  width: 900px;
  table-layout: fixed;
  text-align: left;
}
#legal {
  margin: 0 auto;
  margin-top: 1.5em;
  font-size: 0.8em;
}
#number {
  font-size: 42px;
  font-family: Arial, sans-serif;
  margin: 0 auto;
  text-align: center;
  width: 100px;
}
#behave_likert {
  text-align: left;
  width: 200px;
}
#behave {
  font-weight: bold;
}
td {
  text-align: center;
  width: 60px;
  padding: 0px;
}
#sent_question {
  font-size: 16px;
}
</style>
</head>


<body>
 <!-- The instructions slide. -->
<div class="slide" id="instructions">
  <br>
  <img src="images/stanford.png" alt="Stanford University">
  <p id='logo-text'>Stanford Language and Cognition Lab</p>
  <br>
  <br>
  <p align="center"><b>PLEASE ONLY COMPLETE THIS HIT IF YOU HAVE A CHILD BETWEEN THE AGES OF 2-10 YEARS. </b><p></p> 
   In this survey, you'll be asked to judge how often your child draws 56 different objects, animals, and things. </b></p>
  <br>
  <button type="button" onclick="this.blur(); experiment.next();">Start</button>

  <p class="block-text">
    <br> <b> Note: you won't be able to preview this HIT before accepting it because it's so short. </b></p>

  <p class="block-text" id="legal">By answering the following questions, you are participating in a study being performed by cognitive scientists in the Stanford Department of Psychology. If you have questions about this research, please contact us at <a href="mailto://languagecoglab@gmail.com.">languagecoglab@gmail.com</a>.
    You must be at least 18 years old to participate. Your participation in this research is voluntary. You may decline to answer any or all of the following questions. You may decline further participation, at any time, without adverse consequences.
    Your anonymity is assured; the researchers who have requested your participation will not receive any personal information about you. Note however that we have recently been made aware that your public Amazon.com profile can be accessed via your
    worker ID if you do not choose to opt out. If you would like to opt out of this feature, you may follow instructions available <a href="https://www.amazon.com/gp/help/customer/display.html?nodeId=16465241">here</a>.</p>
</div>

<!-- Progress Bar -->
<div class="progress">
  <div id="progress" class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:0%">
  </div>
</div>

<!-- Questionnaire slide - How often categories are drawn -->
<div class="slide" id="commonlyDrawnRatings">
    <div align="center">
      <h3 id='itemInstructions'>How often has your child drawn a teapot?</h3><br> 
    </div>

    <table align = "center"><tr>
      <td align="center">
        <tr>
          <td><input id ="likert1" type="radio" name="judgment" value = "1">
          <td></td>
          <td><input id ="likert2" type="radio" name="judgment" value = "2">
          <td></td>
          <td><input id ="likert3" type="radio" name="judgment" value = "3">
          <td></td>
          <td><input id ="likert4" type="radio" name="judgment" value = "4">
          <td></td>
          <td><input id ="likert5" type="radio" name="judgment" value = "5">
        </tr>
        <tr>
          <td><label for="likert1">Never</label></td>
          <td></td>
           <td><label for="likert2">Once or Twice</label></td>
           <td></td>
           <td><label for="likert3">Multiple Times</label></td>
           <td></td>
           <td><label for="likert4">Frequently</label></td>
           <td></td>
           <td><label for="likert5">Nearly every time they draw</label></td>

        </tr>
        <tr></tr>
        <tr></tr>
    </table>


    <!-- Next button and "please make a response" message -->
    <table align="center">
      <tr>
        <td align="center">
          <button type="button" id="nextButton_FamRatings" onClick="experiment.log_response()"> next</button>
        </td> 
        <tr><td align="center">
          <div id="testMessage_att"> </div>
        </td>
      </tr>
    </table>
</div>


<!-- Catch Trial slide - which task we're doing -->
<div class="slide" id="catchTrialTask">
    <div align="center">
      <h3 id='itemInstructions'>What task are you doing right now?</h3><br> 
    </div>

    <table align = "center"><tr>
      <td align="center">
        <tr>
          <td><input id ="likert1" type="radio" name="judgment" value = "1">
          <td></td>
          <td><input id ="likert2" type="radio" name="judgment" value = "2">
          <td></td>
          <td><input id ="likert3" type="radio" name="judgment" value = "3">
          <td></td>
          <td><input id ="likert4" type="radio" name="judgment" value = "4">
          <td></td>
          <td><input id ="likert5" type="radio" name="judgment" value = "5">
        </tr>
        <tr>
          <td><label for="likert1">Judging how often my child says a word</label></td>
          <td></td>
           <td><label for="likert2">Judging how often my child has drawn a category</label></td>
           <td></td>
           <td><label for="likert3">Judging how often my child eats different foods</label></td>
           <td></td>
           <td><label for="likert4">Judging how often my child goes to different places</label></td>
           <td></td>
           <td><label for="likert5">Judging how often my child plays a certain game</label></td>
        </tr>
        <tr></tr>
        <tr></tr>
    </table>


    <!-- Next button and "please make a response" message -->
    <table align="center">
      <tr>
        <td align="center">
          <button type="button" id="nextButton_FamRatings2" onClick="experiment.log_response()"> next</button>
        </td> 
        <tr><td align="center">
          <div id="testMessage_att"> </div>
        </td>
      </tr>
    </table>
</div>


<!-- Children's age slide -->
<div class="slide" id="children_qs" align="center">
  <br>
    <p class="block-text">We want to make sure we have accurate data. Please answer the following question truthfully--you will receive credit regardless of your answer!</p>

        <p><b>How old is the child you answered on behalf of? (Note that you will receive credit regardless of your answer)</b></p>
           <p>Please write your answer in years and months (e.g., 4 years, 3 months)</p>
           <p>
              <input type="text" id="childsAge" form="demographics" name="childsAge" style="width:20%" value="">
             </textarea>
          </p> 

      <p><b>Do you have any comments about this survey?</b></p>
      <p>
        <input type="text" id="comments" name="comments" style="width:40%" value="">
        </textarea>
      </p> 

    <table align="center">
      <tr>
        <td align="center">
          <button type="button" onClick="this.blur(); experiment.next()"> Continue</button>
        </td>
        <tr>
          <td align="center">

          </td>
        </tr>

    </table>
</div>

<!-- The debriefing slide. -->
<div class="slide" id="debriefing">
  <form id="demographics" onsubmit="experiment.submitcomments()">

    <table width="100%">
      <col style="width:30%">
        <col style="width:70%">
          <tr>
            <td><img src="images/ladder.png"></td>
            <td>
              <p><b>Think of this ladder as representing where people stand in the United states.</b></p>
              <p>At the top of the ladder are the people who are the best off - those who have the most money, the most education, and the most respected jobs. At the bottom are the people who are the worst off - who have the least money, least education,
                and the least respected jobs or no job. The higher up you are on this ladder, the closer you are to the people at the very top; the lower you are, the closer you are to the people at the very bottom.
              </p>
              <p><b>Where would you place yourself on this ladder?</b></p>
              <p>
                <select name="ladder" id="ladder" form="demographics">
                  <option value="">Choose a rung</option>
                  <option value="10">10 - Top</option>
                  <option value="9">9</option>
                  <option value="8">8</option>
                  <option value="7">7</option>
                  <option value="6">6</option>
                  <option value="5">5</option>
                  <option value="4">4</option>
                  <option value="3">3</option>
                  <option value="2">2</option>
                  <option value="1">1 - Bottom</option>
                </select>
              </p>
            </td>
          </tr>
    </table>
    <br>

    <p><b>What is your age?</b></p>
    <p>
      <select name="age" id="age" form="demographics">
        <option value="">Choose an age</option>
        <option value="0-19">&nbsp;0-19</option>
        <option value="20-29">20-29</option>
        <option value="30-39">30-39</option>
        <option value="40-49">40-49</option>
        <option value="50-59">50-59</option>
        <option value="60-69">60-69</option>
        <option value="70-79">70-79</option>
        <option value="80-89">80-89</option>
        <option value="&gt;90">90+</option>
      </select>
    </p>


    <p><b>What is your highest level of education completed?</b></p>
    <p>
      <select name="education" id="education" form="demographics">
        <option value="">Choose a level</option>
        <option value="gradeSchool">Grade school</option>
        <option value="highSchool">High school</option>
        <option value="someCollege">Some college</option>
        <option value="4year">4-year college</option>
        <option value="someGrad">Some graduate school</option>
        <option value="Grad">Graduate degree</option>
      </select>
    </p>



  <div align="center">
    <button type="button" id="debriefsubmit" onClick="experiment.submit_comments()">Submit</button>
  </div>
</div>

<!-- The finish slide. -->
<div class="slide" id="finished">
  <p>You're finished - thanks for participating! </p>
</div>


</body>
</html>

<script>
// ############################ Helper functions ##############################

// Shows slides. We're using jQuery here - the **$** is the jQuery selector function, which takes as input either a DOM element or a CSS selector string.
function showSlide(id) {
  // Hide all slides
  $(".slide").hide();
  // Show just the slide we want to show
  $("#"+id).show();
}


// Get random integers.
// When called with no arguments, it returns either 0 or 1. When called with one argument, *a*, it returns a number in {*0, 1, ..., a-1*}. When called with two arguments, *a* and *b*, returns a random value in {*a*, *a + 1*, ... , *b*}.
function random(a,b) {
  if (typeof b == "undefined") {
    a = a || 2;
    return Math.floor(Math.random()*a);
  } else {
    return Math.floor(Math.random()*(b-a+1)) + a;
  }
}

// Add a random selection function to all arrays (e.g., <code>[4,8,7].random()</code> could return 4, 8, or 7). This is useful for condition randomization.
Array.prototype.random = function() {
  return this[random(this.length)];
}

// shuffle function 
function shuffle (a) 
{ 
    var o = [];
    
    for (var i=0; i < a.length; i++) {
  o[i] = a[i];
    }
    
    for (var j, x, i = o.length;
   i;
   j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x); 
    return o;
}

function shuffle_mult() {
    var length0 = 0,
        length = arguments.length,
        i,
        j,
        rnd,
        tmp;

    for (i = 0; i < length; i += 1) {
        if ({}.toString.call(arguments[i]) !== "[object Array]") {
            throw new TypeError("Argument is not an array.");
        }

        if (i === 0) {
            length0 = arguments[0].length;
        }

        if (length0 !== arguments[i].length) {
            throw new RangeError("Array lengths do not match.");
        }
    }


    for (i = 0; i < length0; i += 1) {
        rnd = Math.floor(Math.random() * i);
        for (j = 0; j < length; j += 1) {
            tmp = arguments[j][i];
            arguments[j][i] = arguments[j][rnd];
            arguments[j][rnd] = tmp;
        }
    }
}

// ######################## Configuration settings ############################

//set up item names
itemNames = ['a bear',
'a sheep',
'a camel',
'a tiger',
'a whale',
'a cow',
'an elephant',
'an octopus',
'a frog',
'a bee',
'a spider',
'a piano',
'a chair',
'a couch',
'a cactus',
'a bowl',
'a key',
'a phone',
'a scissors',
'a bottle',
'a hat',
'a lamp',
'a watch',
'an apple',
'an ice cream',
'a clock',
'a mushroom',
'a bike',
'an airplane',
'a bird',
'a cat',
'a rabbit',
'a face',
'a hand',
'a horse',
'a person',
'a dog',
'a fish',
'a snail',
'a bed',
'a house',
'a tree',
'a cup',
'a book',
'a TV',
'a boat',
'a car',
'a train',
'a crab',
'a crocodile',
'a duck',
'a giraffe',
'a lion',
'a monkey',
'a panda',
'a truck']

itemNames=shuffle(itemNames);
var numTrialsExperiment = itemNames.length;


//set up uptake experiment slides.
var trials = [];

for (i = 0; i < itemNames.length; i++) {
    trial = {
        thisItemName: itemNames[i],
        slide: "commonlyDrawnRatings",
        trial_number: i+1,
    }
    trials.push(trial);
}


catchTrialTask = {
        thisItemName: "",
        slide: "catchTrialTask",
        trial_number: i+1,
    }

childAgeTrial = {
        thisItemName: "",
        slide: "children_qs",
        trial_number: i+2,
    }

trials.push(catchTrialTask);
trials.push(childAgeTrial);


// when the document loads
$(document).ready(function() {

    showSlide("instructions");
});


// ############################## The main event ##############################
var experiment = {

  // The object to be submitted.
  data: {
        trial_type:[],
    rating: [],
    itemName: [],
    ladder: [],
    age: [],
    education: [],
    comments: [],
    childsAge:[],
  },

  // end the experiment
  end: function() {
    showSlide("finished");
    setTimeout(function() {
      turk.submit(experiment.data)
    }, 1500);
  },


// LOG RESPONSE
    log_response: function() {
        var response_logged = false;

        // Array of radio buttons
        var radio = document.getElementsByName("judgment");
    
        // Loop through radio buttons
        for (i = 0; i < radio.length; i++) {
         if (radio[i].checked) {
            experiment.data.rating.push(radio[i].value);
            response_logged = true;         
        }
    }
    
        if (response_logged) {
            nextButton_FamRatings.blur();
            
            //  uncheck radio buttons
            for (i = 0; i < radio.length; i++) {
                radio[i].checked = false
            }

            experiment.next();

        } else {
            $("#testMessage_att").html('<font color="red">' + 
            'Please make a response!' + 
             '</font>');
            
        }
    },
  
  // The work horse of the sequence - what to do on every trial.
  next: function() {

    // Allow experiment to start if it's a turk worker OR if it's a test run
    if (window.self == window.top | turk.workerId.length > 0) {
      $("#testMessage_att").html(''); //clear test message
      $("#testMessage_uptake").html(''); 


    $("#progress").attr("style","width:" +
       String(100 * (1 - (trials.length)/numTrialsExperiment)) + "%")
    
          // Get the current trial - <code>shift()</code> removes the first element
      // select from our scales array and stop exp after we've exhausted all the domains
    
          var trial_info = trials.shift();
            console.log(trial_info)

      //If the current trial is undefined, call the end function.
      if (typeof trial_info == "undefined") {
        return experiment.debriefing();
      }

      // check which trial type you're in and display correct slide
      if (trial_info.slide == "commonlyDrawnRatings") {
                $("#itemInstructions").text("How often has your child drawn " + trial_info.thisItemName + '?');
                showSlide("commonlyDrawnRatings"); //display slide
                experiment.data.itemName.push(trial_info.thisItemName);
            }
            if (trial_info.slide == "children_qs") {
                showSlide("children_qs"); 
                }
            if (trial_info.slide == "catchTrialTask") {
                showSlide("catchTrialTask"); 
                }
    experiment.data.trial_type.push(trial_info.slide);
    }
  },

  //  go to debriefing slide
  debriefing: function() {
    showSlide("debriefing");
  },

// submitcomments function
  submit_comments: function() {

    experiment.data.ladder.push(document.getElementById("ladder").value);
    experiment.data.age.push(document.getElementById("age").value);
    experiment.data.education.push(document.getElementById("education").value);
    experiment.data.comments.push(document.getElementById("comments").value);
        experiment.data.childsAge.push(document.getElementById("childsAge").value);
    experiment.end();
  }
}


</script>
